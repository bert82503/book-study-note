

15.4.4 ABA问题
=======

`ABA问题是一种异常现象`：如果在`算法中的节点可以被循环使用`，那么在`使用"比较并交换"指令`时就可能出现这种问题(主要在`没有垃圾回收机制的环境`中)。
有时候还需要知道"自从上次看到V的值为A以来，这个值是否发生了变化？"
在某些算法中，如果V的值首先由A变成B，再由B变成A，那么仍然被认为是发生了变化，并需要重新执行算法中的某些步骤。

如果`在算法中采用自己的方式来管理节点对象的内存`，那么可能出现ABA问题。
如果通过*垃圾回收器*来管理*链表节点*仍然无法避免`ABA问题`，
那么还有**一个相对简单的解决方案**：不是更新某个引用的值，而是**更新两个值，包括一个引用和一个版本号**。
即使这个值由A变为B，然后又变为A，版本号也将是不同的。
`AtomicStampedReference/AtomicMarkableReference`支持`在两个变量上执行原子的条件更新`。
`AtomicStampedReference`将更新一个"对象引用-整数值"二元组，通过在引用上加上"版本号"，从而避免ABA问题。

